
            </>}

            {activeTab === 'costs' && (
                <div className="space-y-6">

                    {/* KPI Cards */}
                    <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                        <div className={`p-6 rounded-3xl border flex flex-col justify-center items-center text-center ${theme === 'space-light' ? 'bg-white border-slate-200' : 'bg-[#111] border border-gray-800/50'}`}>
                            <span className={`text-[10px] font-black uppercase tracking-[0.2em] mb-1 ${theme === 'space-light' ? 'text-slate-500' : 'text-gray-500'}`}>{t('labor_cost')}</span>
                            <span className={`text-3xl font-black ${theme === 'gold' ? 'text-[#d4af37]' : theme === 'space-light' ? 'text-slate-800' : 'text-[#00f2fe]'}`}>€{costStats.laborCost.toFixed(0)}</span>
                            {Object.keys(workerRates).length === 0 && <span className="text-[9px] text-orange-500 font-bold uppercase mt-1">{t('no_rates')}</span>}
                        </div>
                        <div className={`p-6 rounded-3xl border flex flex-col justify-center items-center text-center ${theme === 'space-light' ? 'bg-white border-slate-200' : 'bg-[#111] border border-gray-800/50'}`}>
                            <span className={`text-[10px] font-black uppercase tracking-[0.2em] mb-1 ${theme === 'space-light' ? 'text-slate-500' : 'text-gray-500'}`}>{t('purchase_cost')}</span>
                            <span className={`text-3xl font-black ${theme === 'gold' ? 'text-[#d4af37]' : theme === 'space-light' ? 'text-slate-800' : 'text-[#00f2fe]'}`}>€{costStats.purchaseCost.toFixed(0)}</span>
                        </div>
                        <div className={`p-6 rounded-3xl border flex flex-col justify-center items-center text-center ${theme === 'space-light' ? 'bg-white border-slate-200' : 'bg-[#111] border border-gray-800/50'}`}>
                            <span className={`text-[10px] font-black uppercase tracking-[0.2em] mb-1 ${theme === 'space-light' ? 'text-slate-500' : 'text-gray-500'}`}>{t('total_cost')}</span>
                            <span className={`text-3xl font-black ${theme === 'space-light' ? 'text-slate-800' : 'text-white'}`}>€{costStats.totalCost.toFixed(0)}</span>
                        </div>
                        <div className={`p-6 rounded-3xl border flex flex-col justify-center items-center text-center ${theme === 'space-light' ? 'bg-white border-slate-200' : 'bg-[#111] border border-gray-800/50'}`}>
                            <span className={`text-[10px] font-black uppercase tracking-[0.2em] mb-1 ${theme === 'space-light' ? 'text-slate-500' : 'text-gray-500'}`}>{t('contract_value')}</span>
                            {costStats.contractValue !== null
                                ? <span className={`text-3xl font-black ${theme === 'gold' ? 'text-[#d4af37]' : theme === 'space-light' ? 'text-slate-800' : 'text-[#00f2fe]'}`}>€{costStats.contractValue.toFixed(0)}</span>
                                : <span className="text-xl font-black text-gray-600">—</span>
                            }
                            {costStats.contractValue === null && <span className="text-[9px] text-orange-500 font-bold uppercase mt-1">{t('no_order_value')}</span>}
                        </div>
                    </div>

                    {/* Margin + Donut */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div className={`p-8 rounded-3xl border ${theme === 'space-light' ? 'bg-white border-slate-200' : 'bg-[#111] border border-gray-800/50'}`}>
                            <h3 className={`text-xs font-black uppercase tracking-[0.2em] mb-8 flex items-center gap-2 ${theme === 'space-light' ? 'text-slate-500' : 'text-gray-400'}`}>
                                <Euro size={16} className={theme === 'gold' ? 'text-[#d4af37]' : 'text-[#00f2fe]'}/> {t('cost_breakdown')}
                            </h3>
                            <CostDonutChart />
                        </div>

                        <div className={`p-8 rounded-3xl border ${theme === 'space-light' ? 'bg-white border-slate-200' : 'bg-[#111] border border-gray-800/50'}`}>
                            <h3 className={`text-xs font-black uppercase tracking-[0.2em] mb-8 flex items-center gap-2 ${theme === 'space-light' ? 'text-slate-500' : 'text-gray-400'}`}>
                                <Receipt size={16} className={theme === 'gold' ? 'text-[#d4af37]' : 'text-[#00f2fe]'}/> {t('margin')}
                            </h3>
                            {costStats.margin !== null ? (
                                <div className="space-y-6">
                                    <div className="flex items-baseline gap-4">
                                        <span className={`text-5xl font-black ${costStats.margin >= 0 ? 'text-green-500' : 'text-red-500'}`}>
                                            {costStats.margin >= 0 ? '+' : ''}€{costStats.margin.toFixed(0)}
                                        </span>
                                        <span className={`text-lg font-black px-3 py-1 rounded-full ${costStats.margin >= 0 ? 'bg-green-500/20 text-green-500 border border-green-500/30' : 'bg-red-500/20 text-red-500 border border-red-500/30'}`}>
                                            {costStats.marginPct !== null ? `${costStats.marginPct.toFixed(1)}%` : '---'}
                                        </span>
                                    </div>
                                    <div className="w-full bg-black h-4 rounded-full overflow-hidden border border-gray-800/50">
                                        <div
                                            className={`h-full rounded-full transition-all duration-1000 ${costStats.margin >= 0 ? 'bg-gradient-to-r from-green-600 to-green-400' : 'bg-red-600'}`}
                                            style={{ width: `${Math.min(Math.abs(costStats.marginPct ?? 0), 100)}%` }}
                                        ></div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-3 text-xs font-black">
                                        <div className={`p-3 rounded-xl ${theme === 'space-light' ? 'bg-slate-50' : 'bg-black/40'} border border-gray-800/50`}>
                                            <span className={`${theme === 'space-light' ? 'text-slate-500' : 'text-gray-500'} uppercase tracking-widest block mb-1`}>{t('total_cost')}</span>
                                            <span className={`${theme === 'space-light' ? 'text-slate-800' : 'text-white'} text-lg`}>€{costStats.totalCost.toFixed(0)}</span>
                                        </div>
                                        <div className={`p-3 rounded-xl ${theme === 'space-light' ? 'bg-slate-50' : 'bg-black/40'} border border-gray-800/50`}>
                                            <span className={`${theme === 'space-light' ? 'text-slate-500' : 'text-gray-500'} uppercase tracking-widest block mb-1`}>{t('contract_value')}</span>
                                            <span className={`${theme === 'gold' ? 'text-[#d4af37]' : theme === 'space-light' ? 'text-slate-800' : 'text-[#00f2fe]'} text-lg`}>€{(costStats.contractValue ?? 0).toFixed(0)}</span>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div className="flex flex-col items-center justify-center h-40 gap-3">
                                    <Receipt size={32} className="text-gray-700"/>
                                    <span className="text-xs font-bold uppercase text-gray-600 tracking-widest text-center">{t('no_order_value')}</span>
                                </div>
                            )}
                        </div>
                    </div>

                </div>
            )}
